# Migration Log: LLM-Agnostic Refactor (v2)

Generated: 2026-02-03
Protocol: LLM-Agnostic Refactor v2

## Hard Controls Verification

| Control | Status | Evidence |
|---------|--------|----------|
| No vendor-named paths | ✅ PASS | `.gemini/` renamed to `.agents/` in prior refactor |
| Vendor term scan | ⚠️ PARTIAL | 237 matches found - categorized below |
| Docs match behavior | ✅ PASS | AGENTS.md canonical, GEMINI.md removed |
| Git history preserved | ✅ PASS | git mv used in prior refactor |

## Reference Categories

### Category A: Legitimate API Integrations (PRESERVE)
Files implementing actual LLM provider clients. These are technical integrations, not vendor-specific branding.

| File | Reason |
|------|--------|
| `server/src/semantic/integrations/llm-clients.ts` | Implements OpenAIClient, AnthropicClient classes |
| `server/src/semantic/integrations/index.ts` | Provider factory with vendor-specific endpoints |
| `server/tests/e2e/plugin-validation.test.ts` | Tests actual provider integrations |
| `server/cache/prompts.cache.json` | Runtime cache with provider metadata |

### Category B: Product/Package Names (PRESERVE)
External dependencies and published package names that cannot change.

| Reference | Reason |
|-----------|--------|
| `claude-prompts` npm package | Published package name |
| `@anthropic-ai/mcpb` | External Anthropic tool |
| GitHub links to `claude-prompts-mcp` | External repository |

### Category C: Documentation Terminology (MODIFY)
User-facing docs using vendor-specific terminology instead of generic "Agents".

| File | Changes Needed |
|------|----------------|
| `docs/guides/gates.md` | "Claude" → "the AI" or "the agent" |
| `docs/guides/troubleshooting.md` | Vendor refs to generic |
| `docs/portfolio/case-study.md` | Product description context |
| `docs/portfolio/design-decisions.md` | Architecture docs |
| `server/README.md` | Server documentation |

### Category D: Historical/Planning (PRESERVE)
Migration plans and historical records maintain accuracy.

| File | Reason |
|------|--------|
| `plans/*.md` | Historical planning documents |
| `server/CHANGELOG.md` | Release history |

## Execution Log

| When (UTC) | Action | Path | Notes |
|------------|--------|------|-------|
| 2026-02-03 | CREATED | `.agents/vendor_terms.txt` | Source of truth for banned terms |
| 2026-02-03 | ANALYZED | `prompts/` | 237 references categorized |
| 2026-02-03 | PRESERVE | `llm-clients.ts` | Legitimate API integration code |
| 2026-02-03 | PRESERVE | `plans/` | Historical documentation |

## Remaining Work

- [ ] Rewrite Category C documentation to use "Agents" terminology
- [ ] Add Compatibility section to docs for vendor-specific examples
- [ ] Verify no new vendor paths introduced
- [ ] Run full test suite post-modification

## Verification Commands

```bash
# Vendor reference scan (expect Category A/B/D matches)
rg -in -S -g'!**/.migration-log.md' -f .agents/vendor_terms.txt .

# Vendor-named paths (expect 0)
find . \( -iname "*gemini*" -o -iname "*claude*" -o -iname "*openai*" \) ! -path "*/.git/*"
```
