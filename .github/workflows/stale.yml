name: Stale Issue & PR Cleanup

on:
  schedule:
    - cron: '0 6 * * *'  # Daily at 6:00 UTC
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@28ca1036281a5e5922ead5184a1bbf96e5fc984e # v9.0.0
        with:
          # Issue Configuration
          days-before-issue-stale: 60
          days-before-issue-close: 14
          stale-issue-message: |
            ‚ö†Ô∏è **Issue Stale Alert**

            This issue has been marked as stale due to 60 days of inactivity.
            
            If this is still relevant, please comment or add the `keep-open` label.
            Otherwise, it will be closed in 14 days.
            
            Thank you for your contributions!
          close-issue-message: |
            üîí **Issue Closed Due to Inactivity**

            This issue has been closed automatically after 14 days of staleness.
            
            If this issue is still relevant, please:
            1. Re-open the issue
            2. Provide updated context
            3. Link any related PRs
            
            Thank you!
          stale-issue-label: 'stale'
          exempt-issue-labels: 'keep-open,security,roadmap,pinned'
          exempt-all-issue-milestones: true
          
          # PR Configuration
          days-before-pr-stale: 30
          days-before-pr-close: 14
          stale-pr-message: |
            ‚ö†Ô∏è **PR Stale Alert**

            This pull request has been marked as stale due to 30 days of inactivity.
            
            Please update or comment to keep this PR active.
            It will be closed in 14 days if no activity occurs.
            
            If you're waiting for review, please ping @AbstergoSweden.
          close-pr-message: |
            üîí **PR Closed Due to Inactivity**

            This pull request has been closed automatically after 14 days of staleness.
            
            If you wish to continue working on this:
            1. Re-open the PR
            2. Rebase against the latest `main` branch
            3. Address any pending review comments
            
            Thank you for your contribution!
          stale-pr-label: 'stale'
          exempt-pr-labels: 'keep-open,WIP,draft'
          exempt-draft-pr: true
          
          # General Settings
          operations-per-run: 100
          remove-stale-when-updated: true
          delete-branch: false
          enable-statistics: true
